<div class="dashboard-container">
    <header class="dashboard-header">
        <div></div> <!-- Spacer for flexbox if needed, or just remove flex-between -->
        <a routerLink="/create_posts" class="create-post-btn-green">
            <i class="material-icons">add</i>
            <span>Create Post</span>
        </a>
    </header>

    <main class="content">
        <div class="status-grid" *ngIf="uploadStatus">
            <app-status-tracking [status]="uploadStatus" (close)="clearUploadStatus()"></app-status-tracking>
        </div>

        <div class="posts-grid" *ngIf="!isLoading && (posts.length > 0 || uploadStatus)">
            <!-- If we have a selected post status, show it instead of the card -->
            <ng-container *ngFor="let post of posts">
                <app-post-card *ngIf="selectedPostStatus?.postId !== (post._id || post.id)" [post]="post"
                    (click)="onPostClick(post)">
                </app-post-card>

                <app-status-tracking *ngIf="selectedPostStatus?.postId === (post._id || post.id)"
                    [status]="selectedPostStatus" [showDismiss]="false" (close)="clearSelectedStatus()">
                </app-status-tracking>
            </ng-container>
        </div>

        <div class="no-posts" *ngIf="!isLoading && posts.length === 0 && !uploadStatus">
            <i class="material-icons">post_add</i>
            <h3>No posts yet</h3>
            <p>Start by creating your first adoption post!</p>
        </div>

        <div class="loader-container" *ngIf="isLoading">
            <div class="loader"></div>
        </div>
    </main>
</div>